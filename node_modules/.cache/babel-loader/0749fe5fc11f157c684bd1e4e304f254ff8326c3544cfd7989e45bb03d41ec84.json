{"ast":null,"code":"import{createContext,useEffect,useState}from\"react\";import{login}from\"../api/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);useEffect(()=>{const token=localStorage.getItem(\"token\");if(token){setUser({token});}},[]);const handleLogin=async(email,password,callback)=>{const res=await login({email,password});localStorage.setItem(\"token\",res.data.token);console.log(res);setUser(res.data.user);callback(res.data);return res.data;};const handleLogout=()=>{localStorage.removeItem(\"token\");setUser(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,handleLogin,handleLogout},children:children});};","map":{"version":3,"names":["createContext","useEffect","useState","login","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","token","localStorage","getItem","handleLogin","email","password","callback","res","setItem","data","console","log","handleLogout","removeItem","Provider","value"],"sources":["/Users/sreejapodupuganti/Documents/GitHub/Digicard-with-NFC/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport { login } from \"../api/auth\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (token) {\r\n            setUser({ token });\r\n        }\r\n    }, []);\r\n\r\n    const handleLogin = async (email, password, callback) => {\r\n        const res = await login({email, password});\r\n        localStorage.setItem(\"token\", res.data.token);\r\n        console.log(res)\r\n        setUser(res.data.user);\r\n        callback(res.data)\r\n        return res.data\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem(\"token\");\r\n        setUser(null);\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{user, handleLogin, handleLogout}}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}"],"mappings":"AAAA,OAASA,aAAa,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC1D,OAASC,KAAK,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpC,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACrC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAEtCD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAW,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACPD,OAAO,CAAC,CAAEC,KAAM,CAAC,CAAC,CACtB,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,WAAW,CAAG,KAAAA,CAAOC,KAAK,CAAEC,QAAQ,CAAEC,QAAQ,GAAK,CACrD,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAhB,KAAK,CAAC,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAC,CAC1CJ,YAAY,CAACO,OAAO,CAAC,OAAO,CAAED,GAAG,CAACE,IAAI,CAACT,KAAK,CAAC,CAC7CU,OAAO,CAACC,GAAG,CAACJ,GAAG,CAAC,CAChBR,OAAO,CAACQ,GAAG,CAACE,IAAI,CAACX,IAAI,CAAC,CACtBQ,QAAQ,CAACC,GAAG,CAACE,IAAI,CAAC,CAClB,MAAO,CAAAF,GAAG,CAACE,IAAI,CACnB,CAAC,CAED,KAAM,CAAAG,YAAY,CAAGA,CAAA,GAAM,CACvBX,YAAY,CAACY,UAAU,CAAC,OAAO,CAAC,CAChCd,OAAO,CAAC,IAAI,CAAC,CACjB,CAAC,CAED,mBACIN,IAAA,CAACC,WAAW,CAACoB,QAAQ,EAACC,KAAK,CAAE,CAACjB,IAAI,CAAEK,WAAW,CAAES,YAAY,CAAE,CAAAf,QAAA,CAC1DA,QAAQ,CACS,CAAC,CAE/B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}